<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Iradori Practice â€” Voice (TTS) + ASR</title>

  <style>
  :root{
    --bg:#f8fafc;
    --card:#fff;
    --accent:#2563eb;
    --muted:#6b7280;
    --radius:12px;
    --shadow:0 6px 18px rgba(2,6,23,0.06);
  }
  *{box-sizing:border-box}
  body{
    font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
    margin:0; padding:20px; background:var(--bg); color:#0f172a;
  }
  .container{ max-width:1100px; margin:0 auto; }

  header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:18px; flex-wrap:wrap }
  h1{ font-size:1.15rem; margin:0; font-weight:700 }

  .controls button{
    padding:8px 12px; border-radius:10px; border:1px solid #e6eef8; background:#fff; cursor:pointer;
  }

  .card{
    background:var(--card); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow); margin-bottom:18px;
  }
  .card h2{ margin:0 0 12px 0; font-size:1rem; padding-left:8px; border-left:4px solid var(--accent); }

  /* sentence default (desktop) */
  .sentence{
    display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px 0;
    border-bottom:1px dashed #eaeff5;
  }
  .text{ flex:1; min-width:0 }
  .jp{ font-size:1.05rem; font-weight:600 }
  .romaji, .sinhala{ color:var(--muted); margin-top:6px; font-size:0.95rem }

  .actions{ display:flex; gap:8px; align-items:center; flex-shrink:0; white-space:nowrap }
  .btn {
    display:inline-flex; align-items:center; justify-content:center;
    gap:8px;
    padding:8px 12px; border-radius:10px; border:1px solid #e6eef8; background:#fff; cursor:pointer;
    font-size:0.95rem;
  }
  .btn:active{ transform:translateY(1px) }
  .btn.play { font-weight:700; }
  .btn.asr { background:var(--accent); color:#fff; border:none; }
  .mic-status{ font-size:0.9rem; color:var(--muted); min-width:120px }

  /* grid items (numbers/jobs) */
  .grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:12px }
  .list-item.sentence{ display:flex; flex-direction:column; align-items:center; text-align:center; padding:14px; border-radius:10px; border:1px solid #eef4fb; background:#fff }
  .list-item .jp{ font-size:1.2rem }
  .list-item .romaji, .list-item .sinhala{ font-size:1rem; color:var(--muted); margin-top:6px }

  footer{ text-align:center; color:var(--muted); margin-top:18px; font-size:0.92rem }

  /* mobile: bigger, touch-friendly, vertical stacking */
  @media (max-width:640px){
    body{ padding:12px }
    h1{ font-size:1.3rem }
    .card{ padding:18px; border-radius:14px }
    .card h2{ font-size:1.25rem; border-left-width:6px; padding-left:10px; }

    .sentence, .list-item.sentence{
      flex-direction:column; align-items:flex-start; text-align:left; padding:16px; border-radius:14px; margin-bottom:12px;
      border:1px solid #e6eef8; box-shadow:0 2px 8px rgba(2,6,23,0.04)
    }
    .jp{ font-size:1.5rem; line-height:1.25 }
    .romaji, .sinhala{ font-size:1.15rem }

    .actions{ width:100%; margin-top:12px; gap:12px; justify-content:flex-start }
    .btn{ padding:12px 14px; font-size:1.05rem; border-radius:12px }
    .btn.icon-only{ width:56px; height:56px; padding:0; }
    .list-item .jp{ font-size:1.4rem }
    .grid{ display:flex; flex-direction:column; gap:12px }
    footer{ font-size:1rem }
  }
  .romaji.hidden,
.sinhala.hidden {
  display: none !important;
}

  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Iradori Practice â€” Voice (TTS) + ASR</h1>
      <div class="controls">
        <button id="toggleRomaji" class="btn">Toggle Romaji</button>
        <button id="toggleSinhala" class="btn">Toggle Sinhala</button>
        <button id="readAll" class="btn">ğŸ”Š Read all</button>
      </div>
    </header>

    <!-- GREETINGS -->
        <section class="card" id="phrases">
            <h2 style="margin-top:0">Greetings</h2>

            <div class="sentence" data-index="1">
                <div class="text">
                    <div class="jp">ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ã€‚</div>
                    <div class="romaji hidden">OhayÅ gozaimasu.</div>
                    <div class="sinhala hidden">Subha udÄ“sanak (à·ƒà·”à¶· à¶‹à¶¯à·‘à·ƒà¶±à¶šà·Š)</div>
                    <div class="asr-result" id="result-1"></div>
                </div>
                <div class="actions">
                    <button class="play">â–¶</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-1"></span>
                </div>
            </div>

            <div class="sentence" data-index="2">
                <div class="text">
                    <div class="jp">ã“ã‚“ã«ã¡ã¯ã€‚</div>
                    <div class="romaji hidden">Konnichiwa.</div>
                    <div class="sinhala hidden">Hello (à·„à·™à¶½à·)</div>
                    <div class="asr-result" id="result-2"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-2"></span></div>
            </div>

            <div class="sentence" data-index="3">
                <div class="text">
                    <div class="jp">ã“ã‚“ã°ã‚“ã¯ã€‚</div>
                    <div class="romaji hidden">Konban wa.</div>
                    <div class="sinhala hidden">Good evening (à·ƒà·”à¶· à·ƒà¶±à·Šà¶°à·Šâ€à¶ºà·à·€à¶šà·Š)</div>
                    <div class="asr-result" id="result-3"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-3"></span></div>
            </div>

            <div class="sentence" data-index="4">
                <div class="text">
                    <div class="jp">ãŠã‚„ã™ã¿ãªã•ã„ã€‚</div>
                    <div class="romaji hidden">Oyasuminasai.</div>
                    <div class="sinhala hidden">Subha nidÄ (à·ƒà·”à¶· à¶»à·à¶­à·Šâ€à¶»à·’à¶ºà¶šà·Š)</div>
                    <div class="asr-result" id="result-4"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-4"></span></div>
            </div>
        </section>

        <!-- THANKS / APOLOGY / POLITE PHRASES -->
        <section class="card" id="polite">
            <h2 style="margin-top:0">Polite phrases</h2>

            <div class="sentence" data-index="5">
                <div class="text">
                    <div class="jp">ã©ã†ã‚‚ ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</div>
                    <div class="romaji hidden">DÅmo, arigatÅ gozaimasu.</div>
                    <div class="sinhala hidden">Bohoma sthuthi (à¶¶à·œà·„à·à¶¸ à·ƒà·Šà¶­à·”à¶­à·’à¶ºà·’!)</div>
                    <div class="asr-result" id="result-5"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-5"></span></div>
            </div>

            <div class="sentence" data-index="6">
                <div class="text">
                    <div class="jp">ã™ã¿ã¾ã›ã‚“ å¤±ç¤¼ã—ã¾ã™ã€‚</div>
                    <div class="romaji hidden">Sumimasen shitsurei shimasu.</div>
                    <div class="sinhala hidden">SamÄ wenna, samÄvendÄ (à·ƒà¶¸à·à·€à·™à¶±à·Šà¶±)</div>
                    <div class="asr-result" id="result-6"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-6"></span></div>
            </div>
        </section>

        <!-- INTRODUCTIONS / DIALOGUE -->
        <section class="card" id="introductions">
            <h2 style="margin-top:0">Introductions & Dialogue</h2>

            <div class="sentence" data-index="10">
                <div class="text">
                    <div class="jp">ã“ã‚“ã«ã¡ã¯ </div>
                    <div class="romaji hidden">Konnichiwa â€” Hello</div>
                    <div class="sinhala hidden">à·„à·™à¶½à·</div>
                    <div class="asr-result" id="result-10"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-10"></span></div>
            </div>

            <div class="sentence" data-index="11">
                <div class="text">
                    <div class="jp">ç§ã¯ã‚µãƒãƒ‹ã§ã™ã€‚</div>
                    <div class="romaji hidden">Watashi wa Sachini desu.</div>
                    <div class="sinhala hidden">Mama Sachini (à¶¸à¶¸ à·ƒà¶ à·’à¶±à·’)</div>
                    <div class="asr-result" id="result-11"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-11"></span></div>
            </div>

            <div class="sentence" data-index="12">
                <div class="text">
                    <div class="jp">ç§ã¯ãƒ©ãƒ€ãƒ¼ã§ã™ã€‚ã©ã†ãã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚</div>
                    <div class="romaji hidden">Watashi wa Radha desu. DÅzo yoroshiku onegaishimasu.</div>
                    <div class="sinhala hidden">Mama Radha. DÅzo yoroshiku (à¶¸à¶¸ à¶»à·à¶°à· à·€à·™à¶¸à·’)</div>
                    <div class="asr-result" id="result-12"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-12"></span></div>
            </div>

            <div class="sentence" data-index="13">
                <div class="text">
                    <div class="jp">ã¯ã˜ã‚ã¾ã—ã¦ã€‚ã©ã†ãã‚ˆã‚ã—ãã€‚</div>
                    <div class="romaji hidden">Hajimemashite. DÅzo yoroshiku.</div>
                    <div class="sinhala hidden">à¶”à¶¶à·€ à·„à¶¸à·”à·€à·“à¶¸ à·ƒà¶­à·”à¶§à¶šà·Š.</div>
                    <div class="asr-result" id="result-13"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-13"></span></div>
            </div>

            <div class="sentence" data-index="14">
                <div class="text">
                    <div class="jp">ãŠåå‰ã¯ä½•ã§ã™ã‹ï¼Ÿ</div>
                    <div class="romaji hidden">O-namae wa nan desu ka?</div>
                    <div class="sinhala hidden">(à¶”à¶ºà·à¶œà·š à¶±à¶¸ à¶¸à·œà¶šà¶šà·Šà¶¯?)</div>
                    <div class="asr-result" id="result-14"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-14"></span></div>
            </div>

            <div class="sentence" data-index="15">
                <div class="text">
                    <div class="jp">ç§ã¯ã‚µã‚¯ãƒ©ã§ã™ã€‚</div>
                    <div class="romaji hidden">Watashi wa Sakura desu.</div>
                    <div class="sinhala hidden"> (à¶¸à¶¸ à·ƒà¶šà·”à¶»à·)</div>
                    <div class="asr-result" id="result-15"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-15"></span></div>
            </div>
        </section>

        <!-- COUNTRY / NATIONALITY -->
        <section class="card" id="countries">
            <h2 style="margin-top:0">Country & Nationality</h2>

            <div class="sentence" data-index="20">
                <div class="text">
                    <div class="jp">ãŠå›½ã¯ã©ã¡ã‚‰ã§ã™ã‹ï¼Ÿ</div>
                    <div class="romaji hidden">Okuni wa dochira desu ka?</div>
                    <div class="sinhala hidden">OyÄge rata koheda? (à¶”à¶ºà·à¶œà·š à¶»à¶§ à¶šà·œà·„à·™à¶¯?)</div>
                    <div class="asr-result" id="result-20"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-20"></span></div>
            </div>

            <div class="sentence" data-index="21">
                <div class="text">
                    <div class="jp">ã‚¹ãƒªãƒ©ãƒ³ã‚«ã§ã™ã€‚</div>
                    <div class="romaji hidden">Suriranka desu.</div>
                    <div class="sinhala hidden">Sri Lanka desÄ“ (à·à·Šâ€à¶»à·“ à¶½à¶‚à¶šà·à·€)</div>
                    <div class="asr-result" id="result-21"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-21"></span></div>
            </div>

            <div class="sentence" data-index="22">
                <div class="text">
                    <div class="jp">ã‚¹ãƒªãƒ©ãƒ³ã‚«äººã§ã™ã€‚</div>
                    <div class="romaji hidden">Suriranka-jin desu.</div>
                    <div class="sinhala hidden">Sri LankÄ janayak (à·à·Šâ€à¶»à·“ à¶½à¶‚à¶šà· à¶¢à·à¶­à·’à¶šà¶ºà·™à¶šà·Š)</div>
                    <div class="asr-result" id="result-22"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-22"></span></div>
            </div>

            <div class="sentence" data-index="23">
                <div class="text">
                    <div class="jp">ç§ã¯æ—¥æœ¬ã‹ã‚‰æ¥ã¾ã—ãŸã€‚</div>
                    <div class="romaji hidden">Watashi wa Nihon kara kimashita.</div>
                    <div class="sinhala hidden">Nihon idan Äyata (à¶¢à¶´à¶±à·Šà¶œà·™à¶±à·Š à¶†à·€à·)</div>
                    <div class="asr-result" id="result-23"></div>
                </div>
                <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-23"></span></div>
            </div>
        </section>

        <!-- NUMBERS & AGE PRACTICE -->
        <section class="card" id="numbers">
            <h2 style="margin-top:0">Numbers (SÅ«ji) & Ages</h2>

            <!-- number items as sentences -->
            <div class="grid">
                <div class="list-item sentence" data-index="30">
                    <div class="text">
                        <div class="jp">ä¸€ â€” </div>
                        <div class="romaji hidden">ichi</div>
                        <div class="sinhala hidden">1</div>
                        <div class="asr-result" id="result-30"></div>
                    </div>
                    <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-30"></span></div>
                </div>

                <div class="list-item sentence" data-index="31">
                    <div class="text">
                        <div class="jp">äºŒ â€” </div>
                        <div class="romaji hidden">ni</div>
                        <div class="sinhala hidden">2</div>
                        <div class="asr-result" id="result-31"></div>
                    </div>
                    <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-31"></span></div>
                </div>

                <div class="list-item sentence" data-index="32">
                    <div class="text">
                        <div class="jp">ä¸‰ â€” </div>
                        <div class="romaji hidden">san</div>
                        <div class="sinhala hidden">3</div>
                        <div class="asr-result" id="result-32"></div>
                    </div>
                    <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-32"></span></div>
                </div>

                <div class="list-item sentence" data-index="33">
                    <div class="text">
                        <div class="jp">å›› â€”</div>
                        <div class="romaji hidden">yon / shi</div>
                        <div class="sinhala hidden">4</div>
                        <div class="asr-result" id="result-33"></div>
                    </div>
                    <div class="actions"><button class="play">â–¶</button><button class="start-asr">Start</button><span class="mic-status" id="mic-33"></span></div>
                </div>

           <div class="list-item sentence" data-index="34">
    <div class="text">
        <div class="jp">äº” â€” </div>
        <div class="romaji hidden">go</div>
        <div class="sinhala hidden">5</div>
        <div class="asr-result" id="result-34"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-34"></span>
    </div>
</div>

<div class="list-item sentence" data-index="35">
    <div class="text">
        <div class="jp">å…­ â€” </div>
        <div class="romaji hidden">roku</div>
        <div class="sinhala hidden">6</div>
        <div class="asr-result" id="result-35"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-35"></span>
    </div>
</div>

<div class="list-item sentence" data-index="36">
    <div class="text">
        <div class="jp">ä¸ƒ â€” </div>
        <div class="romaji hidden">nana</div>
        <div class="sinhala hidden">7</div>
        <div class="asr-result" id="result-36"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-36"></span>
    </div>
</div>

<div class="list-item sentence" data-index="37">
    <div class="text">
        <div class="jp">å…« â€” </div>
        <div class="romaji hidden">hachi</div>
        <div class="sinhala hidden">8</div>
        <div class="asr-result" id="result-37"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-37"></span>
    </div>
</div>

<div class="list-item sentence" data-index="38">
    <div class="text">
        <div class="jp">ä¹ â€” </div>
        <div class="romaji hidden">kyÅ«</div>
        <div class="sinhala hidden">9</div>
        <div class="asr-result" id="result-38"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-38"></span>
    </div>
</div>

<div class="list-item sentence" data-index="39">
    <div class="text">
        <div class="jp">å â€” </div>
        <div class="romaji hidden">jÅ«</div>
        <div class="sinhala hidden">10</div>
        <div class="asr-result" id="result-39"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-39"></span>
    </div>
</div>

<div class="list-item sentence" data-index="40">
    <div class="text">
        <div class="jp">äºŒå â€” </div>
        <div class="romaji hidden">ni jÅ«</div>
        <div class="sinhala hidden">20</div>
        <div class="asr-result" id="result-40"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-40"></span>
    </div>
</div>

<div class="list-item sentence" data-index="41">
    <div class="text">
        <div class="jp">ä¸‰å â€” </div>
        <div class="romaji hidden">san jÅ«</div>
        <div class="sinhala hidden">30</div>
        <div class="asr-result" id="result-41"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-41"></span>
    </div>
</div>

<div class="list-item sentence" data-index="42">
    <div class="text">
        <div class="jp">å››å â€” </div>
        <div class="romaji hidden">yon jÅ«</div>
        <div class="sinhala hidden">40</div>
        <div class="asr-result" id="result-42"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-42"></span>
    </div>
</div>

<div class="list-item sentence" data-index="43">
    <div class="text">
        <div class="jp">äº”å â€” </div>
        <div class="romaji hidden">go jÅ«</div>
        <div class="sinhala hidden">50</div>
        <div class="asr-result" id="result-43"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-43"></span>
    </div>
</div>

<div class="list-item sentence" data-index="44">
    <div class="text">
        <div class="jp">å…­å â€” </div>
        <div class="romaji hidden">roku jÅ«</div>
        <div class="sinhala hidden">60</div>
        <div class="asr-result" id="result-44"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-44"></span>
    </div>
</div>

<div class="list-item sentence" data-index="45">
    <div class="text">
        <div class="jp">ä¸ƒå â€” </div>
        <div class="romaji hidden">nana jÅ«</div>
        <div class="sinhala hidden">70</div>
        <div class="asr-result" id="result-45"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-45"></span>
    </div>
</div>

<div class="list-item sentence" data-index="46">
    <div class="text">
        <div class="jp">å…«å â€” </div>
        <div class="romaji hidden">hachi jÅ«</div>
        <div class="sinhala hidden">80</div>
        <div class="asr-result" id="result-46"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-46"></span>
    </div>
</div>

<div class="list-item sentence" data-index="47">
    <div class="text">
        <div class="jp">ä¹å â€” </div>
        <div class="romaji hidden">kyÅ« jÅ«</div>
        <div class="sinhala hidden">90</div>
        <div class="asr-result" id="result-47"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-47"></span>
    </div>
</div>

<div class="list-item sentence" data-index="48">
    <div class="text">
        <div class="jp">ç™¾ â€” </div>
        <div class="romaji hidden">hyaku</div>
        <div class="sinhala hidden">100</div>
        <div class="asr-result" id="result-48"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-48"></span>
    </div>
</div>







            <!-- age example sentences -->
    <div class="list-item sentence" data-index="49">
    <div class="text">
        <div class="jp">ä¸€æ­³ â€” </div>
        <div class="romaji hidden">issai</div>
        <div class="sinhala hidden">1 year old</div>
        <div class="asr-result" id="result-49"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-49"></span>
    </div>
</div>

<div class="list-item sentence" data-index="50">
    <div class="text">
        <div class="jp">åä¸€æ­³ â€” </div>
        <div class="romaji hidden">jÅ« issai</div>
        <div class="sinhala hidden">11 years old</div>
        <div class="asr-result" id="result-50"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-50"></span>
    </div>
</div>

<div class="list-item sentence" data-index="51">
    <div class="text">
        <div class="jp">äºŒåä¸€æ­³ â€” </div>
        <div class="romaji hidden">ni jÅ« issai</div>
        <div class="sinhala hidden">21 years old</div>
        <div class="asr-result" id="result-51"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-51"></span>
    </div>
</div>

<div class="list-item sentence" data-index="52">
    <div class="text">
        <div class="jp">ä¸‰åä¸€æ­³ â€” </div>
        <div class="romaji hidden">san jÅ« issai</div>
        <div class="sinhala hidden">31 years old</div>
        <div class="asr-result" id="result-52"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-52"></span>
    </div>
</div>

<div class="list-item sentence" data-index="53">
    <div class="text">
        <div class="jp">å››åä¸€æ­³ â€” </div>
        <div class="romaji hidden">yon jÅ« issai</div>
        <div class="sinhala hidden">41 years old</div>
        <div class="asr-result" id="result-53"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-53"></span>
    </div>
</div>

<div class="list-item sentence" data-index="54">
    <div class="text">
        <div class="jp">å…«æ­³ â€” </div>
        <div class="romaji hidden">hassai</div>
        <div class="sinhala hidden">8 years old</div>
        <div class="asr-result" id="result-54"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-54"></span>
    </div>
</div>

<div class="list-item sentence" data-index="55">
    <div class="text">
        <div class="jp">åå…«æ­³ â€” </div>
        <div class="romaji hidden">jÅ« hassai</div>
        <div class="sinhala hidden">18 years old</div>
        <div class="asr-result" id="result-55"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-55"></span>
    </div>
</div>

<div class="list-item sentence" data-index="56">
    <div class="text">
        <div class="jp">äºŒåå…«æ­³ â€” </div>
        <div class="romaji hidden">ni jÅ« hassai</div>
        <div class="sinhala hidden">28 years old</div>
        <div class="asr-result" id="result-56"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-56"></span>
    </div>
</div>

<div class="list-item sentence" data-index="57">
    <div class="text">
        <div class="jp">ä¸‰åå…«æ­³ â€” </div>
        <div class="romaji hidden">san jÅ« hassai</div>
        <div class="sinhala hidden">38 years old</div>
        <div class="asr-result" id="result-57"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-57"></span>
    </div>
</div>

<div class="list-item sentence" data-index="58">
    <div class="text">
        <div class="jp">åæ­³ â€” </div>
        <div class="romaji hidden">jussai</div>
        <div class="sinhala hidden">10 years old</div>
        <div class="asr-result" id="result-58"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-58"></span>
    </div>
</div>

<div class="list-item sentence" data-index="59">
    <div class="text">
        <div class="jp">äºŒåæ­³ â€” </div>
        <div class="romaji hidden">ni jussai</div>
        <div class="sinhala hidden">20 years old</div>
        <div class="asr-result" id="result-59"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-59"></span>
    </div>
</div>

<div class="list-item sentence" data-index="60">
    <div class="text">
        <div class="jp">ä¸‰åæ­³ â€” </div>
        <div class="romaji hidden">san jussai</div>
        <div class="sinhala hidden">30 years old</div>
        <div class="asr-result" id="result-60"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-60"></span>
    </div>
</div>

<div class="list-item sentence" data-index="61">
    <div class="text">
        <div class="jp">å››åæ­³ â€” </div>
        <div class="romaji hidden">yon jussai</div>
        <div class="sinhala hidden">40 years old</div>
        <div class="asr-result" id="result-61"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-61"></span>
    </div>
</div>

<div class="list-item sentence" data-index="62">
    <div class="text">
        <div class="jp">äº”åæ­³ â€” </div>
        <div class="romaji hidden">go jussai</div>
        <div class="sinhala hidden">50 years old</div>
        <div class="asr-result" id="result-62"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-62"></span>
    </div>
</div>
<!-- ğŸ—£ï¸ Conversation: Asking Age (ãªã‚“ã•ã„ã§ã™ã‹) -->

<div class="list-item sentence" data-index="63">
    <div class="text">
        <div class="jp">A: â€¦â€¦ã•ã‚“ã€ãªã‚“ã•ã„ã§ã™ã‹ã€‚</div>
        <div class="romaji hidden">A: ... San, nan sai desu ka.</div>
        <div class="sinhala hidden">A: à¶”à¶ºà·à¶§ à·€à¶ºà·ƒ à¶šà·“à¶ºà¶¯?</div>
        <div class="asr-result" id="result-63"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-63"></span>
    </div>
</div>

<div class="list-item sentence" data-index="64">
    <div class="text">
        <div class="jp">B: ã‚ãŸã—ã¯ ï¼’ï¼”ã•ã„ ã§ã™ã€‚ã‚ãªãŸã¯ï¼Ÿ</div>
        <div class="romaji hidden">B: Watashi wa nijÅ«yon sai desu. Anata wa?</div>
        <div class="sinhala hidden">B: à¶¸à¶§ à·€à¶ºà·ƒ 24à¶ºà·’. à¶”à¶ºà·à¶§?</div>
        <div class="asr-result" id="result-64"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-64"></span>
    </div>
</div>

<div class="list-item sentence" data-index="65">
    <div class="text">
        <div class="jp">A: ã‚ãŸã—ã¯ ï¼’ï¼‘ã•ã„ ã§ã™ã€‚</div>
        <div class="romaji hidden">A: Watashi wa nijÅ«ichi sai desu.</div>
        <div class="sinhala hidden">A: à¶¸à¶§ à·€à¶ºà·ƒ 21à¶ºà·’.</div>
        <div class="asr-result" id="result-65"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-65"></span>
    </div>
</div>

<div class="list-item sentence" data-index="66">
    <div class="text">
        <div class="jp">B: ã‹ã®ã˜ã‚‡ã¯ ãªã‚“ã•ã„ ã§ã™ã‹ã€‚</div>
        <div class="romaji hidden">B: Kanojo wa nan sai desu ka.</div>
        <div class="sinhala hidden">B: à¶‡à¶ºà¶œà·š à·€à¶ºà·ƒ à¶šà·“à¶ºà¶¯?</div>
        <div class="asr-result" id="result-66"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-66"></span>
    </div>
</div>

<div class="list-item sentence" data-index="67">
    <div class="text">
        <div class="jp">A: ã‹ã®ã˜ã‚‡ã¯ ï¼‘ï¼˜ã•ã„ ã§ã™ã€‚</div>
        <div class="romaji hidden">A: Kanojo wa jÅ«hassai desu.</div>
        <div class="sinhala hidden">A: à¶‡à¶ºà¶œà·š à·€à¶ºà·ƒ 18à¶ºà·’.</div>
        <div class="asr-result" id="result-67"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-67"></span>
    </div>
</div>

 </section>


 
        <!-- OCCUPATIONS â€” every item becomes interactive -->
        <section class="card" id="jobs">
            <h2 style="margin-top:0">Occupations (Vocabulary) â€” each item has mic & TTS</h2>
            <p class="small">From PDF: each occupation below can be practiced with TTS and ASR.</p>
            <div class="grid">
                <!-- ğŸ§‘â€ğŸ’¼ è·æ¥­ï¼ˆShokugyÅï¼‰â€“ Occupations -->

<div class="list-item sentence" data-index="68">
    <div class="text">
        <div class="jp">ã‹ã„ã—ã‚ƒã„ã‚“ â€” </div>
        <div class="romaji hidden">kaishain</div>
        <div class="sinhala hidden">company employee</div>
        <div class="asr-result" id="result-68"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-68"></span>
    </div>
</div>

<div class="list-item sentence" data-index="69">
    <div class="text">
        <div class="jp">ãã‚“ã“ã†ã„ã‚“ â€” </div>
        <div class="romaji hidden">ginkÅin</div>
        <div class="sinhala hidden">bank employee</div>
        <div class="asr-result" id="result-69"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-69"></span>
    </div>
</div>

<div class="list-item sentence" data-index="70">
    <div class="text">
        <div class="jp">ãã‚‡ã†ã— â€” </div>
        <div class="romaji hidden">kyÅshi</div>
        <div class="sinhala hidden">teacher</div>
        <div class="asr-result" id="result-70"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-70"></span>
    </div>
</div>

<div class="list-item sentence" data-index="71">
    <div class="text">
        <div class="jp">ã¦ã‚“ã„ã‚“ â€” </div>
        <div class="romaji hidden">ten'in</div>
        <div class="sinhala hidden">shop assistant</div>
        <div class="asr-result" id="result-71"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-71"></span>
    </div>
</div>

<div class="list-item sentence" data-index="72">
    <div class="text">
        <div class="jp">ã“ã†ã‚€ã„ã‚“ â€” </div>
        <div class="romaji hidden">kÅmuin</div>
        <div class="sinhala hidden">civil servant</div>
        <div class="asr-result" id="result-72"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-72"></span>
    </div>
</div>

<div class="list-item sentence" data-index="73">
    <div class="text">
        <div class="jp">ã¹ã‚“ã”ã— â€” </div>
        <div class="romaji hidden">bengoshi</div>
        <div class="sinhala hidden">lawyer</div>
        <div class="asr-result" id="result-73"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-73"></span>
    </div>
</div>

<div class="list-item sentence" data-index="74">
    <div class="text">
        <div class="jp">ã¡ã‚‡ã†ã‚Šã— â€” </div>
        <div class="romaji hidden">chÅrishi</div>
        <div class="sinhala hidden">cook / chef</div>
        <div class="asr-result" id="result-74"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-74"></span>
    </div>
</div>

<div class="list-item sentence" data-index="75">
    <div class="text">
        <div class="jp">ã†ã‚“ã¦ã‚“ã—ã‚… â€” </div>
        <div class="romaji hidden">untenshu</div>
        <div class="sinhala hidden">driver</div>
        <div class="asr-result" id="result-75"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-75"></span>
    </div>
</div>

<div class="list-item sentence" data-index="76">
    <div class="text">
        <div class="jp">ã‹ã—ã‚… â€” </div>
        <div class="romaji hidden">kashu</div>
        <div class="sinhala hidden">singer</div>
        <div class="asr-result" id="result-76"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-76"></span>
    </div>
</div>

<div class="list-item sentence" data-index="77">
    <div class="text">
        <div class="jp">ãŒã‹ â€” </div>
        <div class="romaji hidden">gaka</div>
        <div class="sinhala hidden">painter</div>
        <div class="asr-result" id="result-77"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-77"></span>
    </div>
</div>

<div class="list-item sentence" data-index="78">
    <div class="text">
        <div class="jp">ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ â€” </div>
        <div class="romaji hidden">enjinia</div>
        <div class="sinhala hidden">engineer</div>
        <div class="asr-result" id="result-78"></div>
    </div>
    <div class="actions">
        <button class="play">â–¶</button>
        <button class="start-asr">Start</button>
        <span class="mic-status" id="mic-78"></span>
    </div>
</div>
 </div>
 </section>

        <!-- QUICK EXERCISE -->
        <section class="card exercise" id="exercise">
            <h2 style="margin-top:0">Quick Exercise â€” Choose correct greeting</h2>
            <p class="small">Situation: æœã«å‹ã ã¡ã«ä¼šã£ãŸã¨ãã€ã©ã®æŒ¨æ‹¶ã‚’é€ã‚Šã¾ã™ã‹ï¼Ÿ</p>
            <div id="choices">
                <div class="choice" data-value="a">ãŠã¯ã‚ˆã†</div>
                <div class="choice" data-value="b">ã“ã‚“ã«ã¡ã¯</div>
                <div class="choice" data-value="c">ã“ã‚“ã°ã‚“ã¯</div>
                <div class="choice" data-value="d">ãŠã‚„ã™ã¿</div>
            </div>
            <div style="margin-top:10px">
                <button id="checkAnswer">Check answer</button>
                <span id="answerText" class="small" style="margin-left:10px"></span>
            </div>
        </section>

        <footer>
            Tip: Click "Start" to begin speech recognition for that phrase. The browser will ask permission to use the microphone.
            Chrome/Edge on desktop have the most complete SpeechRecognition support. Source: PDF you uploaded. 
        </footer>
  </div>

  <script>
  // Basic helpers
  function el(q, root=document) { return root.querySelector(q) }
  function els(q, root=document) { return Array.from(root.querySelectorAll(q)) }

  // Toggle romaji/sinhala
  function toggleClassAll(selector, cls) {
    els(selector).forEach(e => e.classList.toggle(cls));
  }
  el('#toggleRomaji').addEventListener('click', () => toggleClassAll('.romaji','hidden'));
  el('#toggleSinhala').addEventListener('click', () => toggleClassAll('.sinhala','hidden'));

  // --- TTS (speechSynthesis) ---
  function speak(text){
    if (!('speechSynthesis' in window)) {
      alert('Speech synthesis not supported in this browser.');
      return;
    }
    // stop previous utterances
    window.speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = 'ja-JP';
    // try pick a Japanese voice if available
    const voices = window.speechSynthesis.getVoices();
    for (let i=0;i<voices.length;i++){
      if (voices[i].lang && voices[i].lang.indexOf('ja') === 0) { u.voice = voices[i]; break; }
    }
    window.speechSynthesis.speak(u);
  }

  // Play single phrase: each .play button speaks its .jp text
  els('.sentence').forEach(node => {
    const playBtn = node.querySelector('.play');
    if (!playBtn) return;
    playBtn.addEventListener('click', function (e) {
      // find jp text inside this sentence
      const jp = (node.querySelector('.jp') || {}).textContent || '';
      if (jp.trim() === '') return;
      // user gesture -> safe to call speak on mobile browsers
      speak(jp.trim());
    });
  });

  // Read all button
  el('#readAll').addEventListener('click', function(){
    const texts = els('.sentence .jp').map(n => n.textContent.trim()).join('ã€‚ ');
    if (texts) speak(texts);
  });

  // --- ASR (SpeechRecognition) setup ---
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition || null;
  const supportsASR = !!SpeechRecognition;

  // Attach ASR handlers
  els('.sentence').forEach(node => {
    const startBtn = node.querySelector('.start-asr');
    const resEl = node.querySelector('.asr-result');
    const micEl = node.querySelector('.mic-status');
    const targetEl = node.querySelector('.jp');
    if (!startBtn || !resEl || !micEl || !targetEl) return;

    const targetText = targetEl.textContent.trim();

    startBtn.addEventListener('click', async function(){
      resEl.textContent = '';
      micEl.textContent = '';
      // If browser supports Web Speech API
      if (supportsASR) {
        try {
          const recog = new SpeechRecognition();
          recog.lang = 'ja-JP';
          recog.interimResults = false;
          recog.maxAlternatives = 3;
          recog.onstart = () => micEl.textContent = 'Listening...';
          recog.onerror = (e) => micEl.textContent = 'Error: ' + (e.error || e.message || 'unknown');
          recog.onend = () => { if (micEl.textContent === 'Listening...') micEl.textContent = 'Stopped.'; };
          recog.onresult = (ev) => {
            let transcript = '';
            for (let i=0;i<ev.results.length;i++){
              transcript += ev.results[i][0].transcript + ' ';
            }
            transcript = transcript.trim();
            resEl.innerHTML = 'Recognized: <span class="small">'+ transcript +'</span>';
            // simple normalize
            const norm = s => (s||'').toLowerCase().replace(/[\u3000\s\.,!?\-\"'Â«Â»\(\)\[\]_]/g,'').replace(/ãƒ¼/g,'').replace(/ã€‚/g,'').trim();
            const nRec = norm(transcript), nTgt = norm(targetText);
            if (!nRec) { resEl.innerHTML += ' <span class="asr-wrong">âœ– No speech</span>'; speak(targetText); return; }
            if (nRec === nTgt || nTgt.indexOf(nRec) !== -1 || nRec.indexOf(nTgt) !== -1) {
              resEl.innerHTML += ' <span class="asr-correct">âœ” Good match</span>';
              speak('ã‚ˆãã§ãã¾ã—ãŸã€‚');
            } else {
              resEl.innerHTML += ' <span class="asr-wrong">âœ– Not exact</span>';
              speak(targetText);
            }
          };
          // start recognition (user gesture)
          try { recog.start(); } catch(err) { micEl.textContent = 'Start failed: '+ err.message; }
        } catch(e){
          micEl.textContent = 'ASR init error';
        }
        return;
      }

      // If ASR not supported: show alert and try simple microphone permission flow
      const msg = 'SpeechRecognition not supported in this browser. Tap OK to grant microphone permission (no live recognition).';
      if (confirm(msg)) {
        // try to request microphone so user can practice (but no recognition)
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
          try {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            micEl.textContent = 'Microphone access granted (no ASR).';
            // stop tracks immediately
            stream.getTracks().forEach(t => t.stop());
          } catch (err) {
            micEl.textContent = 'Microphone permission denied.';
          }
        } else {
          micEl.textContent = 'Microphone API not available.';
        }
      } else {
        micEl.textContent = 'Mic canceled.';
      }
    });
  });

  // If browser has no ASR, keep mic buttons visible but user will get confirm/alert as above
  if (!supportsASR) {
    // optionally add a small note / disable long-press behavior
    // nothing to do: start-asr click already handles fallback with confirm/getUserMedia
  }

  // Ensure voices loaded on some browsers
  if (window.speechSynthesis && window.speechSynthesis.getVoices().length === 0) {
    window.speechSynthesis.addEventListener('voiceschanged', function(){});
  }
  </script>
</body>
</html>
