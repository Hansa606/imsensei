<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Mainichi no aisatsu ‚Äî Practice (Mic & ASR)</title>
    <style>
        :root {
            --bg: #f9fafb;
            --card: #ffffff;
            --accent: #342f9b;
            --accent-light: #6366f1;
            --muted: #6b7280;
            --text: #111827;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        }

        /* üåô optional auto dark mode */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #0f172a;
                --card: #1e293b;
                --accent: #6366f1;
                --accent-light: #818cf8;
                --muted: #94a3b8;
                --text: #f1f5f9;
                --shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
            }
        }

        body {
            font-family: "Noto Sans JP", "Segoe UI", Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 16px;
            line-height: 1.6;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
        }

        /* --- HEADER --- */
        header {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 8px;
            margin-bottom: 16px;
        }

        h1 {
            font-size: 20px;
            margin: 0;
            color: var(--accent);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
        }

        .controls button {
            padding: 10px 16px;
            border: none;
            border-radius: 10px;
            background: var(--accent);
            color: white;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .controls button:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
        }

        /* --- CARD --- */
        .card {
            background: var(--card);
            border-radius: 14px;
            padding: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 16px;
        }

        /* --- SENTENCE BLOCK --- */
        .sentence {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
            padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .text {
            width: 100%;
        }

        .jp {
            font-size: 20px;
            font-weight: 600;
        }

        .romaji,
        .sinhala {
            font-size: 15px;
            color: var(--muted);
            margin-top: 4px;
        }

        .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            width: 100%;
        }

        .actions button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 10px;
            background: var(--accent);
            color: white;
            cursor: pointer;
            font-size: 15px;
            transition: background 0.2s, transform 0.2s;
        }

        .actions button:hover {
            background: var(--accent-light);
            transform: scale(1.03);
        }

        .mic-status {
            font-size: 13px;
            color: var(--muted);
        }

        /* --- GRID (for numbers & jobs) --- */
        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .list-item {
            background: var(--card);
            border-radius: 10px;
            padding: 10px;
            border: 1px solid #e5e7eb;
            box-shadow: var(--shadow);
        }

        /* --- EXERCISE --- */
        .choice {
            border: 1px solid #e5e7eb;
            background: var(--card);
            padding: 12px;
            margin: 6px 0;
            border-radius: 8px;
            text-align: center;
            transition: background 0.2s, transform 0.2s;
        }

        .choice:hover {
            background: var(--accent-light);
            color: white;
            transform: scale(1.02);
        }

        .choice.selected {
            background: var(--accent);
            color: white;
        }

        button#checkAnswer {
            margin-top: 10px;
            background: var(--accent);
            color: white;
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        button#checkAnswer:hover {
            background: var(--accent-light);
        }

        footer {
            margin-top: 20px;
            text-align: center;
            font-size: 13px;
            color: var(--muted);
        }

        /* --- Hide unused desktop-only spacing --- */
        @media (min-width: 768px) {
            .grid {
                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            }
        }

        .hidden {
            display: none;
        }

  


        #nextPageBtnBottom {
            padding: 10px 16px;
            border: none;
            border-radius: 10px;
            background: var(--accent);
            color: white;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.2s;

}

#nextPageBtnBottom:hover {
    background: var(--accent-light);
    transform: translateY(-2px) scale(1.05);
}

#nextPageBtnBottom:active {
    transform: scale(0.97);
}

/* Responsive scaling for the button */
@media (max-width: 1034px) {
    #nextPageBtnBottom {
        padding: 0px 24px;
        font-size: 16px;
    }
}

@media (max-width: 768px) {
    #nextPageBtnBottom {
        padding: 8px 20px;
        font-size: 15px;
    }
}

@media (max-width: 480px) {
    #nextPageBtnBottom {
        padding: 6px 16px;
        font-size: 14px;
    }
}



#prevPageBtnTop,
#prevPageBtnBottom {
    padding: 10px 16px;
    border: none;
    border-radius: 10px;
    background: var(--accent);
    color: white;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.2s;
}

#prevPageBtnTop:hover,
#prevPageBtnBottom:hover {
    background: var(--accent-light);
    transform: translateY(-2px) scale(1.05);
}

#prevPageBtnTop:active,
#prevPageBtnBottom:active {
    transform: scale(0.97);
}
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Mainichi no aisatsu </h1>
            <div class="controls">
                <button id="toggleRomaji">Toggle Romaji</button>
                <button id="toggleSinhala">Toggle Sinhala</button>
                <button id="readAll">Read all (TTS)</button>
            </div>
            <div class="next-page" style="margin-top: 15px; justify-content: center;">
                <button id="nextPageBtnBottom">‚Üê Previous Page</button>
            </div>
        </header>

        <!-- GREETINGS (from PDF) -->
        <section class="card" id="phrases">
            <h2 style="margin-top:0">Greetings / Daily Phrases</h2>

            <!-- A: Ohay≈ç gozaimasu. B: Ohay≈ç gozaimasu. -->
            <div class="sentence" data-index="1">
                <div class="text">
                    <div class="jp">„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ</div>
                    <div class="romaji hidden">Ohay≈ç gozaimasu.</div>
                    <div class="sinhala hidden">(‡∑É‡∑î‡∂∑ ‡∂ã‡∂Ø‡∑ë‡∑É‡∂±‡∂ö‡∑ä)</div>
                    <div class="asr-result" id="result-1"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-1"></span>
                </div>
            </div>

            <!-- Konnichi wa -->
            <div class="sentence" data-index="2">
                <div class="text">
                    <div class="jp">„Åì„Çì„Å´„Å°„ÅØ„ÄÇ</div>
                    <div class="romaji hidden">Konnichiwa.</div>
                    <div class="sinhala hidden">(‡∑Ñ‡∑ô‡∂Ω‡∑ù)</div>
                    <div class="asr-result" id="result-2"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-2"></span></div>
            </div>

            <!-- Konban wa -->
            <div class="sentence" data-index="3">
                <div class="text">
                    <div class="jp">„Åì„Çì„Å∞„Çì„ÅØ„ÄÇ</div>
                    <div class="romaji hidden">Konban wa.</div>
                    <div class="sinhala hidden">(‡∑É‡∑î‡∂∑ ‡∑É‡∂±‡∑ä‡∂∞‡∑ä‚Äç‡∂∫‡∑è‡∑Ä‡∂ö‡∑ä)</div>
                    <div class="asr-result" id="result-3"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-3"></span></div>
            </div>

            <!-- Oyasuminasai -->
            <div class="sentence" data-index="4">
                <div class="text">
                    <div class="jp">„Åä„ÇÑ„Åô„Åø„Å™„Åï„ÅÑ„ÄÇ</div>
                    <div class="romaji hidden">Oyasuminasai.</div>
                    <div class="sinhala hidden">(‡∑É‡∑î‡∂∑ ‡∂ª‡∑è‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∂ö‡∑ä)</div>
                    <div class="asr-result" id="result-4"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-4"></span></div>
            </div>

            <!-- Arigat≈ç / D≈ç itashimashite -->
            <div class="sentence" data-index="5">
                <div class="text">
                    <div class="jp">„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ</div>
                    <div class="romaji hidden">Arigat≈ç gozaimasu.</div>
                    <div class="sinhala hidden">(‡∂∂‡∑ú‡∑Ñ‡∑ù‡∂∏ ‡∑É‡∑ä‡∂≠‡∑î‡∂≠‡∑í‡∂∫‡∑í)</div>
                    <div class="asr-result" id="result-5"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-5"></span></div>
            </div>

            <div class="sentence" data-index="6">
                <div class="text">
                    <div class="jp">„Å©„ÅÜ„ÅÑ„Åü„Åó„Åæ„Åó„Å¶„ÄÇ</div>
                    <div class="romaji hidden">D≈ç itashimashite.</div>
                    <div class="sinhala hidden">(‡∂î‡∂∫‡∑è‡∑Ä ‡∑É‡∑è‡∂Ø‡∂ª‡∂∫‡∑ô‡∂±‡∑ä ‡∂¥‡∑í‡∑Ö‡∑í‡∂ú‡∂±‡∑ä‡∂±‡∑Ä‡∑è.)</div>
                    <div class="asr-result" id="result-6"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-6"></span></div>
            </div>

            <!-- Mata ashita / matane -->
            <div class="sentence" data-index="7">
                <div class="text">
                    <div class="jp">„Åæ„ÅüÊòéÊó•„ÄÇ</div>
                    <div class="romaji hidden">Mata ashita.</div>
                    <div class="sinhala hidden">(‡∑Ñ‡∑ô‡∂ß‡∂≠‡∑ä ‡∑Ñ‡∂∏‡∑î‡∑Ä‡∑ô‡∂∏‡∑î)</div>
                    <div class="asr-result" id="result-7"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-7"></span></div>
            </div>

            <div class="sentence" data-index="8">
                <div class="text">
                    <div class="jp">„Åæ„Åü„Å≠„ÄÇ</div>
                    <div class="romaji hidden">Matane.</div>
                    <div class="sinhala hidden">(‡∂±‡∑ê‡∑Ä‡∂≠ ‡∑Ñ‡∂∏‡∑î‡∑Ä‡∑ô‡∂±‡∑ä‡∂±‡∂∏‡∑ä)</div>
                    <div class="asr-result" id="result-8"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-8"></span></div>
            </div>

            <!-- Osaki ni shitsurei shimasu / Otsukaresama -->
            <div class="sentence" data-index="9">
                <div class="text">
                    <div class="jp">„ÅäÂÖà„Å´Â§±Á§º„Åó„Åæ„Åô„ÄÇ</div>
                    <div class="romaji hidden">Osaki ni shitsurei shimasu.</div>
                    <div class="sinhala hidden">(‡∑É‡∂∏‡∑è‡∑Ä‡∑ô‡∂±‡∑ä‡∂±, ‡∂∏‡∂∏ ‡∂∏‡∑î‡∂Ω‡∑í‡∂±‡∑ä‡∂∏ ‡∂∫‡∂±‡∑ä‡∂±‡∂∏‡∑ä.)</div>
                    <div class="asr-result" id="result-9"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-9"></span></div>
            </div>

            <div class="sentence" data-index="10">
                <div class="text">
                    <div class="jp">„ÅäÁñ≤„Çå„Åï„Åæ„Åß„Åô„ÄÇ</div>
                    <div class="romaji hidden">Otsukare sama desu.</div>
                    <div class="sinhala hidden">(‡∂î‡∂∂‡∂ú‡∑ö ‡∂∏‡∑Ñ‡∂±‡∑ä‡∑É‡∑í‡∂∫‡∂ß ‡∑É‡∑ä‡∂≠‡∑ñ‡∂≠‡∑í‡∂∫‡∑í.)</div>
                    <div class="asr-result" id="result-10"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-10"></span></div>
            </div>

            <!-- Ogenki desu ka -->
            <div class="sentence" data-index="11">
                <div class="text">
                    <div class="jp">„ÅäÂÖÉÊ∞ó„Åß„Åô„ÅãÔºü</div>
                    <div class="romaji hidden">Ogenki desu ka?</div>
                    <div class="sinhala hidden">(‡∂î‡∂∫‡∑è‡∂ß ‡∂ö‡∑ú‡∑Ñ‡∑ú‡∂∏ ‡∂Ø?)</div>
                    <div class="asr-result" id="result-11"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-11"></span></div>
            </div>

            <div class="sentence" data-index="12">
                <div class="text">
                    <div class="jp">„ÅØ„ÅÑ„ÄÅÂÖÉÊ∞ó„Åß„Åô„ÄÇ</div>
                    <div class="romaji hidden">Hai, genki desu.</div>
                    <div class="sinhala hidden">(‡∂î‡∑Ä‡∑ä, ‡∂∏‡∂∏ ‡∑Ñ‡∑ú‡∂≥‡∑í‡∂±‡∑ä.)</div>
                    <div class="asr-result" id="result-12"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-12"></span></div>
            </div>

        </section>

        <!-- COMMON QUESTIONS & REQUESTS (from PDF) -->
        <section class="card" id="polite">
            <h2 style="margin-top:0">Questions & Useful Phrases</h2>

            <div class="sentence" data-index="20">
                <div class="text">
                    <div class="jp">„Åô„Åø„Åæ„Åõ„Çì„ÄÇ</div>
                    <div class="romaji hidden">Sumimasen.</div>
                    <div class="sinhala hidden">(‡∑É‡∂∏‡∑è‡∑Ä‡∑ô‡∂±‡∑ä‡∂±)</div>
                    <div class="asr-result" id="result-20"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-20"></span></div>
            </div>

            <div class="sentence" data-index="21">
                <div class="text">
                    <div class="jp">„ÅäÂêçÂâç„ÅØ‰Ωï„Åß„Åô„ÅãÔºü</div>
                    <div class="romaji hidden">Onamae wa nan desu ka?</div>
                    <div class="sinhala hidden">(‡∂î‡∂∂‡∂ú‡∑ö ‡∂±‡∂∏ ‡∂∏‡∑ú‡∂ö‡∂ö‡∑ä‡∂Ø?)</div>
                    <div class="asr-result" id="result-21"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-21"></span></div>
            </div>

            <div class="sentence" data-index="22">
                <div class="text">
                    <div class="jp">Êó•Êú¨Ë™û„Åå„Çè„Åã„Çä„Åæ„Åõ„Çì„ÄÇ</div>
                    <div class="romaji hidden">Nihongo ga wakarimasen.</div>
                    <div class="sinhala hidden">(‡∂∏‡∂ß ‡∂¢‡∂¥‡∂±‡∑ä ‡∂∑‡∑è‡∑Ç‡∑è‡∑Ä ‡∂≠‡∑ö‡∂ª‡∑ô‡∂±‡∑ä‡∂±‡∑ö ‡∂±‡∑ê‡∑Ñ‡∑ê)</div>
                    <div class="asr-result" id="result-22"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-22"></span></div>
            </div>

            <div class="sentence" data-index="23">
                <div class="text">
                    <div class="jp">„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô„ÄÇ</div>
                    <div class="romaji hidden">M≈ç ichido onegaishimasu.</div>
                    <div class="sinhala hidden">(‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂ë‡∂∫ ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ö‡∑í‡∂∫‡∂±‡∑Ä‡∂Ø?)</div>
                    <div class="asr-result" id="result-23"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-23"></span></div>
            </div>

            <div class="sentence" data-index="24">
                <div class="text">
                    <div class="jp">‰ΩèÊâÄ„ÇíÊïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</div>
                    <div class="romaji hidden">J≈´sho o oshiete kudasai.</div>
                    <div class="sinhala hidden">(‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂î‡∂∂‡∑ö ‡∂Ω‡∑í‡∂¥‡∑í‡∂±‡∂∫ ‡∂∏‡∂ß ‡∂ö‡∑í‡∂∫‡∂±‡∑ä‡∂±.)</div>
                    <div class="asr-result" id="result-24"></div>
                </div>
                <div class="actions"><button class="play">‚ñ∂</button><button class="start-asr">Start</button><span
                        class="mic-status" id="mic-24"></span></div>
            </div>

            <!-- Likes & Dislikes / Preferences (merged into same section) -->
            <h3 style="margin-top:20px;">Likes & Dislikes / Preferences</h3>
            
            <!-- Nani suki desu ka -->
            <div class="sentence" data-index="25">
                <div class="text">
                    <div class="jp">‰Ωï„ÅåÂ•Ω„Åç„Åß„Åô„Åã„ÄÇ</div>
                    <div class="romaji hidden">Nani ga suki desu ka?</div>
                    <div class="sinhala hidden">(‡∂î‡∂∫‡∑è ‡∂ö‡∑ê‡∂∏‡∂≠‡∑í ‡∂ö‡∑î‡∂∏‡∂ö‡∂ß ‡∂Ø?)</div>
                    <div class="asr-result" id="result-25"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-25"></span>
                </div>
            </div>
            
            <div class="sentence" data-index="26">
                <div class="text">
                    <div class="jp">„Çπ„Éù„Éº„ÉÑ„ÅåÂ•Ω„Åç„Åß„Åô„ÄÇ</div>
                    <div class="romaji hidden">Sup≈çtsu ga suki desu.</div>
                    <div class="sinhala hidden">(‡∂∏‡∂∏ ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è ‡∑Ä‡∂Ω‡∂ß ‡∂ö‡∑ê‡∂∏‡∂≠‡∑í‡∂∫‡∑í)</div>
                    <div class="asr-result" id="result-26"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-26"></span>
                </div>
            </div>
                 
            <!-- Nani ga kirai desu ka -->
            <div class="sentence" data-index="27">
                <div class="text">
                    <div class="jp">‰Ωï„Åå„Åç„Çâ„ÅÑ„Åß„Åô„Åã„ÄÇ</div>
                    <div class="romaji hidden">Nani ga kirai desu ka?</div>
                    <div class="sinhala hidden">(‡∂î‡∂∂ ‡∂Ö‡∂ö‡∂∏‡∑ê‡∂≠‡∑í ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?)</div>
                    <div class="asr-result" id="result-27"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-27"></span>
                </div>
            </div>
            
            <div class="sentence" data-index="28">
                <div class="text">
                    <div class="jp">„Åô„ÅÑ„Åà„ÅÑ„Åå„Åç„Çâ„ÅÑ„Åß„Åô„ÄÇ</div>
                    <div class="romaji hidden">Suiei ga kirai desu.</div>
                    <div class="sinhala hidden">(‡∂∏‡∂∏ ‡∂¥‡∑í‡∑Ñ‡∑í‡∂±‡∑ì‡∂∏‡∂ß ‡∂Ö‡∂ö‡∂∏‡∑ê‡∂≠‡∑í‡∂∫‡∑í.)</div>
                    <div class="asr-result" id="result-28"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-28"></span>
                </div>
            </div>
            
            <!-- Naniga tokui desu ka -->
            <div class="sentence" data-index="29">
                <div class="text">
                    <div class="jp">‰Ωï„Åå„Å®„Åè„ÅÑ„Åß„Åô„Åã„ÄÇ</div>
                    <div class="romaji hidden">Naniga tokui desu ka?</div>
                    <div class="sinhala hidden">(‡∂î‡∂∂‡∂ß ‡∂∏‡∑ú‡∂±‡∑Ä‡∂Ø ‡∑Ñ‡∑ú‡∂≥‡∂ß ‡∂ö‡∂ª‡∂±‡∑ä‡∂± ‡∂¥‡∑î‡∑Ö‡∑î‡∑Ä‡∂±‡∑ä?)</div>
                    <div class="asr-result" id="result-29"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-29"></span>
                </div>
            </div>
            
            <div class="sentence" data-index="30">
                <div class="text">
                    <div class="jp">„Å´„Åª„Çì„Åî„Åå„Å®„Åè„ÅÑ„Åß„Åô„ÄÇ</div>
                    <div class="romaji hidden">Nihongo ga tokui desu.</div>
                    <div class="sinhala hidden">(‡∂∏‡∂ß ‡∂¢‡∂¥‡∂±‡∑ä ‡∂∑‡∑è‡∑Ç‡∑è‡∑Ä ‡∑Ñ‡∑ú‡∂≥‡∂ß ‡∂¥‡∑î‡∑Ö‡∑î‡∑Ä‡∂±‡∑ä)</div>
                    <div class="asr-result" id="result-30"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-30"></span>
                </div>
            </div>
            
            <!-- Nani ga nigate desu ka -->
            <div class="sentence" data-index="31">
                <div class="text">
                    <div class="jp">‰Ωï„Åå„Å´„Åå„Å¶„Åß„Åô„Åã„ÄÇ</div>
                    <div class="romaji hidden">Nani ga nigate desu ka?</div>
                    <div class="sinhala hidden">(‡∂î‡∂∂‡∂ß ‡∂∏‡∑ú‡∂±‡∑Ä‡∂Ø ‡∂Ö‡∂∏‡∑è‡∂ª‡∑î?)</div>
                    <div class="asr-result" id="result-31"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-31"></span>
                </div>
            </div>
            
            <div class="sentence" data-index="32">
                <div class="text">
                    <div class="jp">„Åà„ÅÑ„Åî„Åå„Å´„Åå„Å¶„Åß„Åô„ÄÇ</div>
                    <div class="romaji hidden">Eigo ga nigate desu.</div>
                    <div class="sinhala hidden">(‡∂∏‡∂ß ‡∂â‡∂Ç‡∂ú‡∑ä‚Äç‡∂ª‡∑ì‡∑É‡∑í ‡∂Ö‡∂∏‡∑è‡∂ª‡∑î‡∂∫‡∑í)</div>
                    <div class="asr-result" id="result-32"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-32"></span>
                </div>
            </div>
        </section>

        <!-- VOCABULARY SECTION -->
        <section class="card" id="vocabulary">
            <h2 style="margin-top:0">Vocabulary</h2>
        
            <div class="sentence" data-index="33">
                <div class="text">
                    <div class="jp">„Ç±„Éº„Ç≠</div>
                    <div class="romaji hidden">Kƒìki</div>
                    <div class="sinhala hidden">(‡∂ö‡∑ö‡∂ö‡∑ä)</div>
                    <div class="asr-result" id="result-33"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-33"></span>
                </div>
            </div>
        
            <div class="sentence" data-index="34">
                <div class="text">
                    <div class="jp">„Åî„ÅØ„Çì</div>
                    <div class="romaji hidden">Gohan</div>
                    <div class="sinhala hidden">(‡∂∂‡∂≠‡∑ä)</div>
                    <div class="asr-result" id="result-34"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-34"></span>
                </div>
            </div>
        
            <div class="sentence" data-index="35">
                <div class="text">
                    <div class="jp">„ÇÑ„Åï„ÅÑ</div>
                    <div class="romaji hidden">Yasai</div>
                    <div class="sinhala hidden">(‡∂ë‡∂Ω‡∑Ä‡∑Ö‡∑î)</div>
                    <div class="asr-result" id="result-35"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-35"></span>
                </div>
            </div>
        
            <div class="sentence" data-index="36">
                <div class="text">
                    <div class="jp">„Åè„Å†„ÇÇ„ÅÆ</div>
                    <div class="romaji hidden">Kudamono</div>
                    <div class="sinhala hidden">(‡∂¥‡∑Ö‡∂≠‡∑î‡∂ª‡∑î)</div>
                    <div class="asr-result" id="result-36"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-36"></span>
                </div>
            </div>
        
            <div class="sentence" data-index="37">
                <div class="text">
                    <div class="jp">„ÇØ„É™„Ç±„ÉÉ„Éà</div>
                    <div class="romaji hidden">Kuriketto</div>
                    <div class="sinhala hidden">(‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂ö‡∂ß‡∑ä ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è‡∑Ä)</div>
                    <div class="asr-result" id="result-37"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-37"></span>
                </div>
            </div>
        
            <div class="sentence" data-index="38">
                <div class="text">
                    <div class="jp">„ÉÜ„Éã„Çπ</div>
                    <div class="romaji hidden">Tenisu</div>
                    <div class="sinhala hidden">(‡∂ß‡∑ô‡∂±‡∑í‡∑É‡∑ä)</div>
                    <div class="asr-result" id="result-38"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-38"></span>
                </div>
            </div>
        
            <div class="sentence" data-index="39">
                <div class="text">
                    <div class="jp">„Åä„Çì„Åå„Åè</div>
                    <div class="romaji hidden">Ongaku</div>
                    <div class="sinhala hidden">(‡∑É‡∂Ç‡∂ú‡∑ì‡∂≠‡∂∫)</div>
                    <div class="asr-result" id="result-39"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-39"></span>
                </div>
            </div>
        
            <div class="sentence" data-index="40">
                <div class="text">
                    <div class="jp">„ÅÜ„Åü</div>
                    <div class="romaji hidden">Uta</div>
                    <div class="sinhala hidden">(‡∂ú‡∑ì‡∂≠‡∂∫)</div>
                    <div class="asr-result" id="result-40"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-40"></span>
                </div>
            </div>
        
            <div class="sentence" data-index="41">
                <div class="text">
                    <div class="jp">„Åà</div>
                    <div class="romaji hidden">E</div>
                    <div class="sinhala hidden">(‡∂†‡∑í‡∂≠‡∑ä‚Äç‡∂ª‡∂∫)</div>
                    <div class="asr-result" id="result-41"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-41"></span>
                </div>
            </div>
        
            <div class="sentence" data-index="42">
                <div class="text">
                    <div class="jp">„Åà„ÅÑ„Åå</div>
                    <div class="romaji hidden">Eiga</div>
                    <div class="sinhala hidden">(‡∂†‡∑í‡∂≠‡∑ä‚Äç‡∂ª‡∂¥‡∂ß‡∂∫)</div>
                    <div class="asr-result" id="result-42"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-42"></span>
                </div>
            </div>
        
            <div class="sentence" data-index="43">
                <div class="text">
                    <div class="jp">„Å´„Åª„Çì„Åî</div>
                    <div class="romaji hidden">Nihongo</div>
                    <div class="sinhala hidden">(‡∂¢‡∂¥‡∂±‡∑ä ‡∂∑‡∑è‡∑Ç‡∑è‡∑Ä)</div>
                    <div class="asr-result" id="result-43"></div>
                </div>
                <div class="actions">
                    <button class="play">‚ñ∂</button>
                    <button class="start-asr">Start</button>
                    <span class="mic-status" id="mic-43"></span>
                </div>
            </div>
        </section>

        <!-- QUICK EXERCISE -->
        <section class="card exercise" id="exercise">
            <h2 style="margin-top:0">Quick Exercise ‚Äî Choose correct greeting</h2>
            <p class="small">Situation: Êúù„Å´Âèã„Å†„Å°„Å´‰ºö„Å£„Åü„Å®„Åç„ÄÅ„Å©„ÅÆÊå®Êã∂„ÇíÈÄÅ„Çä„Åæ„Åô„ÅãÔºü</p>
            <div id="choices">
                <div class="choice" data-value="a">„Åä„ÅØ„Çà„ÅÜ</div>
                <div class="choice" data-value="b">„Åì„Çì„Å´„Å°„ÅØ</div>
                <div class="choice" data-value="c">„Åì„Çì„Å∞„Çì„ÅØ</div>
                <div class="choice" data-value="d">„Åä„ÇÑ„Åô„Åø</div>
            </div>
            <div style="margin-top:10px">
                <button id="checkAnswer">Check answer</button>
                <span id="answerText" class="small" style="margin-left:10px"></span>
                   </div>
<div style="margin-top: 15px; text-align: center;">
<button id="prevPageBtnBottom">‚Üê Previous Page</button>
</div>
        </section>

        <footer>
            Tip: Click "Start" to begin speech recognition for that phrase. The browser will ask permission to use the
            microphone.
            Chrome/Edge on desktop have the most complete SpeechRecognition support. Content adapted from your uploaded
            PDF.
        </footer>
    </div>

    <script>
        // Bottom Next Page button
            document.getElementById("nextPageBtnBottom").addEventListener("click", function () {
                window.location.href = "index.html";
            });



        // Toggle display helpers
        function toggleClassAll(selector, cls) {
            document.querySelectorAll(selector).forEach(el => el.classList.toggle(cls));
        }
        document.getElementById('toggleRomaji').addEventListener('click', function () { toggleClassAll('.romaji', 'hidden'); });
        document.getElementById('toggleSinhala').addEventListener('click', function () { toggleClassAll('.sinhala', 'hidden'); });

        // Text-to-speech (Japanese)
        function speak(text) {
            if (!('speechSynthesis' in window)) { alert('SpeechSynthesis not supported in this browser.'); return; }
            var ut = new SpeechSynthesisUtterance(text);
            ut.lang = 'ja-JP';
            var voices = speechSynthesis.getVoices();
            for (var i = 0; i < voices.length; i++) {
                if (voices[i].lang.indexOf('ja') === 0) { ut.voice = voices[i]; break; }
            }
            window.speechSynthesis.cancel();
            window.speechSynthesis.speak(ut);
        }

        // Wire up play buttons (works for every .sentence)
        document.querySelectorAll('.sentence').forEach(function (node) {
            var playBtn = node.querySelector('.play');
            if (!playBtn) return;
            playBtn.addEventListener('click', function () {
                var jp = node.querySelector('.jp').textContent.trim();
                speak(jp);
            });
        });

        // Read all sentences (collect .jp elements)
        document.getElementById('readAll').addEventListener('click', function () {
            var texts = Array.from(document.querySelectorAll('.sentence .jp')).map(n => n.textContent.trim()).join(' ');
            speak(texts);
        });

        // Exercise choice selection
        document.querySelectorAll('#choices .choice').forEach(function (choice) {
            choice.addEventListener('click', function () {
                document.querySelectorAll('#choices .choice').forEach(c => c.classList.remove('selected'));
                choice.classList.add('selected');
                document.getElementById('answerText').textContent = '';
            });
        });
        document.getElementById('checkAnswer').addEventListener('click', function () {
            var sel = document.querySelector('#choices .choice.selected');
            var out = document.getElementById('answerText');
            if (!sel) { out.textContent = 'Please select a choice.'; return; }
            if (sel.dataset.value === 'a') {
                out.textContent = 'Correct ‚Äî „Åä„ÅØ„Çà„ÅÜ (Morning greeting).';
            } else {
                out.textContent = 'Not correct. The best choice is „Åä„ÅØ„Çà„ÅÜ for morning.';
            }
        });

        // --- Speech Recognition (ASR) setup ---
        var SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition || null;

        function normalizeForCompare(s) {
            // lower-case, strip spaces/punctuation and common long-vowel char ‚Äî simple normalization
            if (!s) return '';
            return s.toLowerCase().replace(/[\u3000\s\.,!?\-\"'¬´¬ª\(\)\[\]_]/g, '').replace(/„Éº/g, '').replace(/„ÄÇ/g, '').trim();
        }

        // Add ASR handlers to every .sentence that has .start-asr
        document.querySelectorAll('.sentence').forEach(function (node) {
            var startBtn = node.querySelector('.start-asr');
            var resEl = node.querySelector('.asr-result');
            var micEl = node.querySelector('.mic-status');
            var targetEl = node.querySelector('.jp');
            if (!startBtn || !resEl || !micEl || !targetEl) return;
            var target = targetEl.textContent.trim();

            startBtn.addEventListener('click', function () {
                resEl.textContent = '';
                micEl.textContent = '';

                if (!SpeechRecognition) {
                    // fallback: request microphone permission so user sees flow, but no ASR
                    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                        navigator.mediaDevices.getUserMedia({ audio: true }).then(function (stream) {
                            micEl.textContent = 'Microphone access granted (no ASR). Use Chrome/Edge for recognition.';
                            stream.getTracks().forEach(t => t.stop());
                        }).catch(function (err) { micEl.textContent = 'Microphone permission denied.'; });
                    } else {
                        micEl.textContent = 'SpeechRecognition not supported in this browser.';
                    }
                    return;
                }

                // create recognition instance per start (simple flow)
                var recog = new SpeechRecognition();
                recog.lang = 'ja-JP';
                recog.interimResults = false;
                recog.maxAlternatives = 3;

                recog.onstart = function () { micEl.textContent = 'Listening...'; };
                recog.onerror = function (e) { micEl.textContent = 'Error: ' + (e.error || e.message || 'unknown'); };
                recog.onend = function () { if (micEl.textContent === 'Listening...') micEl.textContent = 'Stopped.'; };

                recog.onresult = function (ev) {
                    var transcript = '';
                    for (var i = 0; i < ev.results.length; i++) {
                        transcript += ev.results[i][0].transcript + ' ';
                    }
                    transcript = transcript.trim();

                    // show recognized text
                    resEl.innerHTML = 'Recognized: <span class="small">' + transcript + '</span>';

                    // compare normalized strings (very simple compare)
                    var normRec = normalizeForCompare(transcript);
                    var normTarget = normalizeForCompare(target);

                    if (!normRec) {
                        resEl.innerHTML += ' <span class="asr-wrong">‚úñ No speech recognized</span>';
                        speak(target); // hint
                        return;
                    }

                    // match heuristics: exact, substring, or reversed substring
                    if (normRec === normTarget || normTarget.indexOf(normRec) !== -1 || normRec.indexOf(normTarget) !== -1) {
                        resEl.innerHTML += ' <span class="asr-correct">‚úî Good match</span>';
                        speak('„Çà„Åè„Åß„Åç„Åæ„Åó„Åü„ÄÇ');
                    } else {
                        resEl.innerHTML += ' <span class="asr-wrong">‚úñ Not exact</span>';
                        // play the correct phrase as hint
                        speak(target);
                    }
                };

                try { recog.start(); } catch (err) { micEl.textContent = 'Recognition start failed: ' + err.message; }
            });
        });

        // Ensure voices loaded for some browsers
        if (speechSynthesis && speechSynthesis.getVoices().length === 0) {
            speechSynthesis.addEventListener('voiceschanged', function () { });
        }

       // Previous Page (Bottom - Exercise)
        document.getElementById("prevPageBtnBottom").addEventListener("click", function () {
            window.location.href = "index.html";
        });
    </script>
</body>

</html>